<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Área entre Funciones Cuadráticas</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: #fff;
            padding: 20px 40px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            text-align: center;
            color: #4a4a4a;
        }
        .input-group {
            margin-bottom: 20px;
        }
        .input-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .input-group input[type="number"] {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            display: block;
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
        .result-box {
            margin-top: 30px;
            border-top: 2px solid #eee;
            padding-top: 20px;
        }
        .result-box h2 {
            color: #4a4a4a;
        }
        #results {
            white-space: pre-wrap;
            font-family: monospace;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Cálculo del Área entre Funciones Cuadráticas</h1>
        <p>Ingrese los coeficientes de dos funciones cuadráticas para encontrar el área encerrada entre ellas y aproximar el resultado con la suma de Riemann.</p>

        <div class="input-group">
            <h2>f(x) = Ax² + Bx + C</h2>
            <label for="f_A">A:</label>
            <input type="number" id="f_A" value="1">
            <label for="f_B">B:</label>
            <input type="number" id="f_B" value="0">
            <label for="f_C">C:</label>
            <input type="number" id="f_C" value="0">
        </div>

        <div class="input-group">
            <h2>g(x) = Dx² + Ex + F</h2>
            <label for="g_A">D:</label>
            <input type="number" id="g_A" value="-1">
            <label for="g_B">E:</label>
            <input type="number" id="g_B" value="0">
            <label for="g_C">F:</label>
            <input type="number" id="g_C" value="4">
        </div>

        <div class="input-group">
            <label for="num_rectangulos">Número de rectángulos para la suma de Riemann:</label>
            <input type="number" id="num_rectangulos" value="1000" min="1">
        </div>

        <button onclick="calcularArea()">Calcular Área</button>

        <div class="result-box">
            <h2>Resultados</h2>
            <pre id="results">Haga clic en 'Calcular Área' para ver los resultados.</pre>
        </div>
    </div>

    <script>
        function evaluar(A, B, C, x) {
            return A * x * x + B * x + C;
        }

        function encontrarRaices(a, b, c) {
            let raices = [];
            let discriminante = b * b - 4 * a * c;

            if (discriminante >= 0) {
                if (discriminante === 0) {
                    raices.push(-b / (2 * a));
                } else {
                    raices.push((-b + Math.sqrt(discriminante)) / (2 * a));
                    raices.push((-b - Math.sqrt(discriminante)) / (2 * a));
                }
            }
            return raices;
        }

        function riemannSuma(func1, func2, a, b, n) {
            let area = 0.0;
            let deltaX = (b - a) / n;

            for (let i = 0; i < n; ++i) {
                let x_i = a + i * deltaX;
                let altura = Math.abs(evaluar(func1.A, func1.B, func1.C, x_i) - evaluar(func2.A, func2.B, func2.C, x_i));
                area += altura * deltaX;
            }
            return area;
        }

        function integralDefinida(A, B, C, a, b) {
            let F_b = (A / 3.0) * Math.pow(b, 3) + (B / 2.0) * Math.pow(b, 2) + C * b;
            let F_a = (A / 3.0) * Math.pow(a, 3) + (B / 2.0) * Math.pow(a, 2) + C * a;
            return F_b - F_a;
        }

        function calcularArea() {
            // Obtener valores del HTML
            const f = {
                A: parseFloat(document.getElementById('f_A').value),
                B: parseFloat(document.getElementById('f_B').value),
                C: parseFloat(document.getElementById('f_C').value)
            };
            const g = {
                A: parseFloat(document.getElementById('g_A').value),
                B: parseFloat(document.getElementById('g_B').value),
                C: parseFloat(document.getElementById('g_C').value)
            };
            const num_rectangulos = parseInt(document.getElementById('num_rectangulos').value);
            const resultsDiv = document.getElementById('results');

            // Validar entradas
            if (isNaN(f.A) || isNaN(f.B) || isNaN(f.C) || isNaN(g.A) || isNaN(g.B) || isNaN(g.C) || isNaN(num_rectangulos) || num_rectangulos <= 0) {
                resultsDiv.textContent = "Error: Por favor, ingrese valores numéricos válidos.";
                return;
            }

            // Encontrar puntos de intersección
            const a_diff = f.A - g.A;
            const b_diff = f.B - g.B;
            const c_diff = f.C - g.C;

            const intersecciones = encontrarRaices(a_diff, b_diff, c_diff);

            if (intersecciones.length < 2) {
                resultsDiv.textContent = "\nLas funciones no se intersecan en dos puntos o son la misma función.\nNo se puede calcular el área cerrada.";
                return;
            }

            const limite_a = Math.min(intersecciones[0], intersecciones[1]);
            const limite_b = Math.max(intersecciones[0], intersecciones[1]);

            // Calcular el área con la suma de Riemann
            const area_riemann = riemannSuma(f, g, limite_a, limite_b, num_rectangulos);

            // Calcular el área exacta
            const integral_diff = integralDefinida(a_diff, b_diff, c_diff, limite_a, limite_b);
            const area_exacta = Math.abs(integral_diff);

            // Calcular el error
            const error = Math.abs(area_exacta - area_riemann);

            // Formatear y mostrar resultados
            const resultText = `
----------------------------------------
Análisis de las funciones
----------------------------------------
f(x) = ${f.A}x^2 + ${f.B}x + ${f.C}
g(x) = ${g.A}x^2 + ${g.B}x + ${g.C}
Los límites de integración son: [${limite_a.toFixed(4)}, ${limite_b.toFixed(4)}]

Área aproximada (Suma de Riemann con ${num_rectangulos} rectángulos): ${area_riemann.toFixed(4)}
Área exacta (mediante integración): ${area_exacta.toFixed(4)}
Error absoluto entre la aproximación y el valor exacto: ${error.toFixed(4)}
            `;
            resultsDiv.textContent = resultText;
        }
    </script>
</body>
</html>